<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>T·∫°o h·ªì s∆° c√° nh√¢n</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;600&display=swap" rel="stylesheet">

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    body {
      font-family: 'Be Vietnam Pro', sans-serif;
      background-color: #f8f9fa;
    }
    .form-control.error, .form-control-file.error {
      border-color: red;
    }
    .card {
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }
    h2 {
      font-weight: 600;
    }
  </style>
</head>
<body>
  <div class="container my-5">
    <div class="card p-4">
      <h2 class="mb-4 text-center">üìÑ T·∫°o v√† l∆∞u h·ªì s∆° c√° nh√¢n</h2>

      <form id="cvForm" novalidate>
        <div class="mb-3">
          <label for="education" class="form-label">H·ªçc v·∫•n</label>
          <textarea class="form-control" id="education" rows="3" required></textarea>
        </div>

        <div class="mb-3">
          <label for="experience" class="form-label">Kinh nghi·ªám l√†m vi·ªác</label>
          <textarea class="form-control" id="experience" rows="3" required></textarea>
        </div>

        <div class="mb-3">
          <label for="skills" class="form-label">K·ªπ nƒÉng</label>
          <textarea class="form-control" id="skills" rows="3" required></textarea>
        </div>

        <div class="mb-3">
          <label for="cvFile" class="form-label">T·∫£i l√™n CV ƒë√≠nh k√®m (PDF, DOCX)</label>
          <input type="file" class="form-control" id="cvFile" accept=".pdf,.doc,.docx" required>
        </div>

        <div class="form-check mb-4">
          <input type="checkbox" class="form-check-input" id="publicCV">
          <label class="form-check-label" for="publicCV">Hi·ªÉn th·ªã c√¥ng khai h·ªì s∆°</label>
        </div>

        <div class="d-flex flex-wrap gap-2">
          <button type="submit" class="btn btn-success">
            <i class="bi bi-save"></i> L∆∞u h·ªì s∆°
          </button>
          <a href="/profile" class="btn btn-secondary">
            <i class="bi bi-arrow-left-circle"></i> Tr·ªü v·ªÅ trang h·ªì s∆°
          </a>
          <a href="/profile/preview" class="btn btn-info text-white">
            <i class="bi bi-eye-fill"></i> Xem tr∆∞·ªõc CV
          </a>
        </div>
      </form>

      <div class="alert mt-4 d-none" id="messageBox"></div>
    </div>
  </div>

  <!-- JS -->
  <script>
    document.getElementById('cvForm').addEventListener('submit', function(e) {
      e.preventDefault();

      const education = document.getElementById('education');
      const experience = document.getElementById('experience');
      const skills = document.getElementById('skills');
      const fileInput = document.getElementById('cvFile');
      const publicCV = document.getElementById('publicCV').checked;
      const messageBox = document.getElementById('messageBox');

      messageBox.classList.add('d-none');
      [education, experience, skills, fileInput].forEach(el => el.classList.remove('error'));

      // Ki·ªÉm tra n·ªôi dung
      if (!education.value || !experience.value || !skills.value) {
        [education, experience, skills].forEach(el => {
          if (!el.value) el.classList.add('error');
        });
        messageBox.textContent = 'Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin h·ªçc v·∫•n, kinh nghi·ªám v√† k·ªπ nƒÉng.';
        messageBox.className = 'alert alert-danger';
        messageBox.classList.remove('d-none');
        return;
      }

      // Ki·ªÉm tra file CV
      const file = fileInput.files[0];
      if (!file) {
        fileInput.classList.add('error');
        messageBox.textContent = 'Vui l√≤ng t·∫£i l√™n file CV ƒë√≠nh k√®m.';
        messageBox.className = 'alert alert-danger';
        messageBox.classList.remove('d-none');
        return;
      }

      const validTypes = ['application/pdf', 'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'];
      if (!validTypes.includes(file.type)) {
        fileInput.classList.add('error');
        messageBox.textContent = 'Ch·ªâ ch·∫•p nh·∫≠n file PDF ho·∫∑c DOCX.';
        messageBox.className = 'alert alert-warning';
        messageBox.classList.remove('d-none');
        return;
      }

      // Th√†nh c√¥ng
      messageBox.textContent = publicCV
        ? '‚úÖ H·ªì s∆° ƒë√£ ƒë∆∞·ª£c l∆∞u v√† c√¥ng khai cho nh√† tuy·ªÉn d·ª•ng.'
        : '‚úÖ H·ªì s∆° ƒë√£ ƒë∆∞·ª£c l∆∞u, hi·ªán ƒëang ·ªü ch·∫ø ƒë·ªô ri√™ng t∆∞.';
      messageBox.className = 'alert alert-success';
      messageBox.classList.remove('d-none');
    });
  </script>
</body>
</html>
